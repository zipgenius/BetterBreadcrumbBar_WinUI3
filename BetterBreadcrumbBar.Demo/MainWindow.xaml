<Window
    x:Class="BetterBreadcrumbBar.Demo.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ctrl="using:BetterBreadcrumbBar.Control"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="BetterBreadcrumbBar Demo v0.9.0">

    <Grid RowDefinitions="Auto,*" Margin="16" RowSpacing="12">

        <!-- Header -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="BetterBreadcrumbBar — Demo v0.9.0"
                       Style="{StaticResource TitleTextBlockStyle}"/>
            <TextBlock
                Text="Click a segment to navigate · Click a chevron to browse siblings · Click the bar to type a path"
                Style="{StaticResource BodyTextBlockStyle}"
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                Margin="0,4,0,0"/>
        </StackPanel>

        <!-- Tabs -->
        <TabView Grid.Row="1" IsAddTabButtonVisible="False" CanDragTabs="False">
            <TabView.TabItems>

                <!-- TAB 1: Real filesystem -->
                <TabViewItem Header="Filesystem" IsClosable="False">
                    <Grid RowDefinitions="Auto,Auto,Auto,Auto,*" Margin="0,12,0,0" RowSpacing="10">

                        <ctrl:BetterBreadcrumbBar
                            x:Name="FsBreadcrumb"
                            Grid.Row="0"
                            PathProvider="{x:Bind FsProvider}"
                            ShowLastSegmentChevron="{x:Bind FsShowLastChevron, Mode=OneWay}"
                            ShowBackButton="{x:Bind FsShowBack, Mode=OneWay}"
                            ShowUpButton="{x:Bind FsShowUp, Mode=OneWay}"
                            ShowHomeButton="{x:Bind FsShowHome, Mode=OneWay}"
                            CanGoBack="{x:Bind FsCanGoBack, Mode=OneWay}"
                            BackButtonTooltip="Go back"
                            UpButtonTooltip="Parent folder"
                            HomeButtonTooltip="Home (C:\Users)"
                            SegmentClicked="FsBreadcrumb_SegmentClicked"
                            NodeSelected="FsBreadcrumb_NodeSelected"
                            BackRequested="FsBreadcrumb_BackRequested"
                            UpRequested="FsBreadcrumb_UpRequested"
                            HomeRequested="FsBreadcrumb_HomeRequested"
                            PathSubmitted="FsBreadcrumb_PathSubmitted"
                            ContextMenuItemClicked="FsBreadcrumb_ContextMenuItemClicked">
                            <ctrl:BetterBreadcrumbBar.LeadingIcon>
                                <SymbolIcon x:Name="FsLeadingIcon" Symbol="Folder"/>
                            </ctrl:BetterBreadcrumbBar.LeadingIcon>
                        </ctrl:BetterBreadcrumbBar>

                        <!-- Feature toggles -->
                        <Border Grid.Row="1"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="12,8">
                            <StackPanel Spacing="4">
                                <TextBlock Text="Optional features"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           FontWeight="SemiBold"/>
                                <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,4,0,0">
                                    <CheckBox Content="Last chevron"
                                              IsChecked="{x:Bind FsShowLastChevron, Mode=TwoWay}"/>
                                    <CheckBox Content="Back button"
                                              IsChecked="{x:Bind FsShowBack, Mode=TwoWay}"/>
                                    <CheckBox Content="Up button"
                                              IsChecked="{x:Bind FsShowUp, Mode=TwoWay}"/>
                                    <CheckBox Content="Home button"
                                              IsChecked="{x:Bind FsShowHome, Mode=TwoWay}"/>
                                    <CheckBox Content="Leading icon"
                                              IsChecked="{x:Bind FsShowIcon, Mode=TwoWay}"
                                              Checked="FsIconToggle_Checked"
                                              Unchecked="FsIconToggle_Unchecked"/>
                                    <CheckBox Content="Right-to-left"
                                              IsChecked="{x:Bind FsRtl, Mode=TwoWay}"
                                              Checked="FsRtlToggle_Checked"
                                              Unchecked="FsRtlToggle_Unchecked"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Quick paths -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Quick paths:" VerticalAlignment="Center"
                                       Style="{StaticResource CaptionTextBlockStyle}"/>
                            <Button Content="C:\" Click="FsQuickPath_Click" Tag="C:\"/>
                            <Button Content="C:\Windows" Click="FsQuickPath_Click" Tag="C:\Windows"/>
                            <Button Content="C:\Program Files" Click="FsQuickPath_Click" Tag="C:\Program Files"/>
                            <Button Content="C:\Users" Click="FsQuickPath_Click" Tag="C:\Users"/>
                        </StackPanel>

                        <!-- Manual path input -->
                        <Grid Grid.Row="3" ColumnDefinitions="*,Auto" ColumnSpacing="8">
                            <TextBox x:Name="FsPathInput"
                                     PlaceholderText="Enter a Windows path (e.g. C:\Users\Public)"
                                     Text="C:\Users"
                                     KeyDown="FsPathInput_KeyDown"/>
                            <Button Grid.Column="1" Content="Go" Click="FsGoButton_Click"/>
                        </Grid>

                        <!-- Event log -->
                        <Border Grid.Row="4"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="8">
                            <ScrollViewer>
                                <TextBlock x:Name="FsEventLog"
                                           Text="(navigation events will appear here)"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                           FontFamily="Consolas" TextWrapping="Wrap"/>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                </TabViewItem>

                <!-- TAB 2: Virtual path (ZIP) -->
                <TabViewItem Header="Virtual (ZIP)" IsClosable="False">
                    <Grid RowDefinitions="Auto,Auto,Auto,Auto,*" Margin="0,12,0,0" RowSpacing="10">

                        <ctrl:BetterBreadcrumbBar
                            x:Name="ZipBreadcrumb"
                            Grid.Row="0"
                            PathProvider="{x:Bind ZipProvider}"
                            ShowLastSegmentChevron="{x:Bind ZipShowLastChevron, Mode=OneWay}"
                            ShowBackButton="{x:Bind ZipShowBack, Mode=OneWay}"
                            ShowUpButton="{x:Bind ZipShowUp, Mode=OneWay}"
                            ShowHomeButton="{x:Bind ZipShowHome, Mode=OneWay}"
                            CanGoBack="{x:Bind ZipCanGoBack, Mode=OneWay}"
                            BackButtonTooltip="Go back"
                            UpButtonTooltip="Parent folder"
                            HomeButtonTooltip="Archive root"
                            SegmentClicked="ZipBreadcrumb_SegmentClicked"
                            NodeSelected="ZipBreadcrumb_NodeSelected"
                            BackRequested="ZipBreadcrumb_BackRequested"
                            UpRequested="ZipBreadcrumb_UpRequested"
                            HomeRequested="ZipBreadcrumb_HomeRequested"
                            PathSubmitted="ZipBreadcrumb_PathSubmitted"
                            ContextMenuItemClicked="ZipBreadcrumb_ContextMenuItemClicked">
                            <ctrl:BetterBreadcrumbBar.LeadingIcon>
                                <FontIcon x:Name="ZipLeadingIcon" Glyph="&#xE8B7;" FontSize="14"/>
                            </ctrl:BetterBreadcrumbBar.LeadingIcon>
                        </ctrl:BetterBreadcrumbBar>

                        <!-- Feature toggles -->
                        <Border Grid.Row="1"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="12,8">
                            <StackPanel Spacing="4">
                                <TextBlock Text="Optional features"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           FontWeight="SemiBold"/>
                                <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,4,0,0">
                                    <CheckBox Content="Last chevron"
                                              IsChecked="{x:Bind ZipShowLastChevron, Mode=TwoWay}"/>
                                    <CheckBox Content="Back button"
                                              IsChecked="{x:Bind ZipShowBack, Mode=TwoWay}"/>
                                    <CheckBox Content="Up button"
                                              IsChecked="{x:Bind ZipShowUp, Mode=TwoWay}"/>
                                    <CheckBox Content="Home button"
                                              IsChecked="{x:Bind ZipShowHome, Mode=TwoWay}"/>
                                    <CheckBox Content="Leading icon"
                                              IsChecked="{x:Bind ZipShowIcon, Mode=TwoWay}"
                                              Checked="ZipIconToggle_Checked"
                                              Unchecked="ZipIconToggle_Unchecked"/>
                                    <CheckBox Content="Right-to-left"
                                              IsChecked="{x:Bind ZipRtl, Mode=TwoWay}"
                                              Checked="ZipRtlToggle_Checked"
                                              Unchecked="ZipRtlToggle_Unchecked"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>

                        <!-- Archive quick paths -->
                        <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="8">
                            <TextBlock Text="Quick paths:" VerticalAlignment="Center"
                                       Style="{StaticResource CaptionTextBlockStyle}"/>
                            <Button Content="Root"               Click="ZipQuickPath_Click" Tag=""/>
                            <Button Content="src"                Click="ZipQuickPath_Click" Tag="src"/>
                            <Button Content="src/components"     Click="ZipQuickPath_Click" Tag="src/components"/>
                            <Button Content="src/components/ui"  Click="ZipQuickPath_Click" Tag="src/components/ui"/>
                            <Button Content="docs/api"           Click="ZipQuickPath_Click" Tag="docs/api"/>
                            <Button Content="tests/unit"         Click="ZipQuickPath_Click" Tag="tests/unit"/>
                        </StackPanel>

                        <!-- Archive tree -->
                        <Border Grid.Row="3"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="8">
                            <StackPanel>
                                <TextBlock Text="Simulated archive structure:"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           FontWeight="SemiBold"/>
                                <TextBlock x:Name="ZipStructureText"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           FontFamily="Consolas" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>

                        <!-- Event log -->
                        <Border Grid.Row="4"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                BorderThickness="1" CornerRadius="6" Padding="8">
                            <ScrollViewer>
                                <TextBlock x:Name="ZipEventLog"
                                           Text="(navigation events will appear here)"
                                           Style="{StaticResource CaptionTextBlockStyle}"
                                           Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                           FontFamily="Consolas" TextWrapping="Wrap"/>
                            </ScrollViewer>
                        </Border>
                    </Grid>
                </TabViewItem>

                <!-- TAB 3: API reference + code examples -->
                <TabViewItem Header="API" IsClosable="False">
                    <ScrollViewer Margin="0,12,0,0">
                        <StackPanel Spacing="16">
                            <TextBlock Text="BetterBreadcrumbBar — Usage &amp; API"
                                       Style="{StaticResource SubtitleTextBlockStyle}"/>

                            <!-- 1. XAML reference -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="1. XAML reference"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock FontFamily="Consolas" FontSize="12" TextWrapping="Wrap">
                                        <Run Text="xmlns:ctrl=&quot;using:BetterBreadcrumbBar.Control&quot;"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="&lt;ctrl:BetterBreadcrumbBar"/>
                                        <LineBreak/>
                                        <Run Text="    PathProvider=&quot;{x:Bind MyProvider}&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    ShowLastSegmentChevron=&quot;True&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    ShowBackButton=&quot;True&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    ShowUpButton=&quot;True&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    ShowHomeButton=&quot;True&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    BackButtonTooltip=&quot;Go back&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    UpButtonTooltip=&quot;Parent folder&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    HomeButtonTooltip=&quot;Home&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    CanGoBack=&quot;{x:Bind CanGoBack, Mode=OneWay}&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    SegmentClicked=&quot;OnSegmentClicked&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    NodeSelected=&quot;OnNodeSelected&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    PathSubmitted=&quot;OnPathSubmitted&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    BackRequested=&quot;OnBackRequested&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    UpRequested=&quot;OnUpRequested&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    HomeRequested=&quot;OnHomeRequested&quot;&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    &lt;ctrl:BetterBreadcrumbBar.LeadingIcon&gt;"/>
                                        <LineBreak/>
                                        <Run Text="        &lt;SymbolIcon Symbol=&quot;Folder&quot;/&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    &lt;/ctrl:BetterBreadcrumbBar.LeadingIcon&gt;"/>
                                        <LineBreak/>
                                        <Run Text="&lt;/ctrl:BetterBreadcrumbBar&gt;"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 2. IPathProvider -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="2. Implement IPathProvider"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock FontFamily="Consolas" FontSize="12" TextWrapping="Wrap">
                                        <Run Text="public class MyProvider : IPathProvider"/>
                                        <LineBreak/>
                                        <Run Text="{}{"/>
                                        <LineBreak/>
                                        <Run Text="    // Required: return sub-folders for the chevron dropdown"/>
                                        <LineBreak/>
                                        <Run Text="    public async Task&lt;IEnumerable&lt;PathNode&gt;&gt;"/>
                                        <LineBreak/>
                                        <Run Text="        GetChildrenAsync(PathNode node, CancellationToken ct)"/>
                                        <LineBreak/>
                                        <Run Text="    {"/>
                                        <LineBreak/>
                                        <Run Text="        return await LoadChildrenFromSource(node, ct);"/>
                                        <LineBreak/>
                                        <Run Text="    }"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="    // Optional: autocomplete in the inline address bar"/>
                                        <LineBreak/>
                                        <Run Text="    public async Task&lt;IEnumerable&lt;string&gt;&gt;"/>
                                        <LineBreak/>
                                        <Run Text="        GetSuggestionsAsync(string partial, CancellationToken ct)"/>
                                        <LineBreak/>
                                        <Run Text="    {"/>
                                        <LineBreak/>
                                        <Run Text="        return await MatchPaths(partial, ct);"/>
                                        <LineBreak/>
                                        <Run Text="    }"/>
                                        <LineBreak/>
                                        <Run Text="}"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 3. SetPath -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="3. Set the path"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock FontFamily="Consolas" FontSize="12" TextWrapping="Wrap">
                                        <Run Text="// From a filesystem path string"/>
                                        <LineBreak/>
                                        <Run Text="MyBreadcrumb.SetPath(@&quot;C:\Users\Public\Documents&quot;);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// From a node list (virtual / ZIP paths)"/>
                                        <LineBreak/>
                                        <Run Text="var nodes = zipProvider.BuildPathNodes(&quot;src/components&quot;);"/>
                                        <LineBreak/>
                                        <Run Text="MyBreadcrumb.SetPath(nodes);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Read the current path at any time"/>
                                        <LineBreak/>
                                        <Run Text="string path = MyBreadcrumb.CurrentPath;"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 4. Handle events -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="4. Handle events"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock FontFamily="Consolas" FontSize="12" TextWrapping="Wrap">
                                        <Run Text="// Segment clicked → navigate to that node"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.SegmentClicked += (s, e) =&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    NavigateTo(e.Node.FullPath);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Chevron menu item selected"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.NodeSelected += (s, e) =&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    NavigateTo(e.Node.FullPath);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Inline address bar confirmed (Enter or suggestion)"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.PathSubmitted += (s, e) =&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    NavigateTo(e.Path);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Back button — host manages history"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.BackRequested += (s, e) =&gt; {"/>
                                        <LineBreak/>
                                        <Run Text="    breadcrumb.SetPath(…);"/>
                                        <LineBreak/>
                                        <Run Text="    breadcrumb.CanGoBack = history.Count &gt; 0; };"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Up button — parent node supplied by the control"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.UpRequested += (s, e) =&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    NavigateTo(e.Node.FullPath);"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// Home button"/>
                                        <LineBreak/>
                                        <Run Text="breadcrumb.HomeRequested += (s, e) =&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    NavigateTo(homePath);"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 5. Right-click context menu -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="5. Right-click context menu"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12"
                                               Foreground="{ThemeResource TextFillColorSecondaryBrush}">
                                        Right-clicking anywhere on the bar — segments, chevrons, leading icon,
                                        overflow button, nav buttons, or any empty area — opens the context menu.
                                        On segments and chevrons the Node reflects the specific item clicked;
                                        on empty areas it reflects the current (last) node.
                                        Two built-in items are always present: Copy path as text (writes to
                                        clipboard automatically) and Paste and go (host must read clipboard).
                                        Add custom items via the ContextMenuItems collection.
                                    </TextBlock>
                                    <TextBlock FontFamily="Consolas" FontSize="12" TextWrapping="Wrap">
                                        <Run Text="// XAML — add custom items and localise built-in labels"/>
                                        <LineBreak/>
                                        <Run Text="&lt;bbb:BetterBreadcrumbBar"/>
                                        <LineBreak/>
                                        <Run Text="    CopyPathMenuText=&quot;Copy path&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    PasteAndGoMenuText=&quot;Paste and navigate&quot;"/>
                                        <LineBreak/>
                                        <Run Text="    ContextMenuItemClicked=&quot;OnContextMenu&quot;&gt;"/>
                                        <LineBreak/>
                                        <Run Text="  &lt;bbb:BetterBreadcrumbBar.ContextMenuItems&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    &lt;bbb:BreadcrumbContextMenuItem"/>
                                        <LineBreak/>
                                        <Run Text="        Text=&quot;Open in Terminal&quot; Tag=&quot;terminal&quot;/&gt;"/>
                                        <LineBreak/>
                                        <Run Text="    &lt;bbb:BreadcrumbContextMenuItem"/>
                                        <LineBreak/>
                                        <Run Text="        Text=&quot;Open in Explorer&quot; Tag=&quot;explorer&quot;/&gt;"/>
                                        <LineBreak/>
                                        <Run Text="  &lt;/bbb:BetterBreadcrumbBar.ContextMenuItems&gt;"/>
                                        <LineBreak/>
                                        <Run Text="&lt;/bbb:BetterBreadcrumbBar&gt;"/>
                                        <LineBreak/><LineBreak/>
                                        <Run Text="// C# — handle all menu clicks in one place"/>
                                        <LineBreak/>
                                        <Run Text="private async void OnContextMenu("/>
                                        <LineBreak/>
                                        <Run Text="    object s, BreadcrumbContextMenuItemClickedEventArgs e)"/>
                                        <LineBreak/>
                                        <Run Text="{}{}"/>
                                        <LineBreak/>
                                        <Run Text="    if (e.IsCopyPath) return; // already on clipboard"/>
                                        <LineBreak/>
                                        <Run Text="    if (e.IsPasteAndGo) {"/>
                                        <LineBreak/>
                                        <Run Text="        var t = await Clipboard.GetContent().GetTextAsync();"/>
                                        <LineBreak/>
                                        <Run Text="        NavigateTo(t); return; }"/>
                                        <LineBreak/>
                                        <Run Text="    // custom items — e.Path is the right-clicked path"/>
                                        <LineBreak/>
                                        <Run Text="    switch (e.ItemTag as string) {"/>
                                        <LineBreak/>
                                        <Run Text="        case &quot;terminal&quot;:"/>
                                        <LineBreak/>
                                        <Run Text="            Process.Start(&quot;wt.exe&quot;, $&quot;-d \&quot;{e.Path}\&quot;&quot;);"/>
                                        <LineBreak/>
                                        <Run Text="            break;"/>
                                        <LineBreak/>
                                        <Run Text="        case &quot;explorer&quot;:"/>
                                        <LineBreak/>
                                        <Run Text="            Process.Start(&quot;explorer.exe&quot;, $&quot;\&quot;{e.Path}\&quot;&quot;);"/>
                                        <LineBreak/>
                                        <Run Text="            break; } }"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                            <!-- 6. Property / event reference -->
                            <Border Background="{ThemeResource LayerFillColorDefaultBrush}"
                                    BorderBrush="{ThemeResource ControlStrokeColorDefaultBrush}"
                                    BorderThickness="1" CornerRadius="6" Padding="12">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="6. Property &amp; event reference"
                                               Style="{StaticResource BodyStrongTextBlockStyle}"/>
                                    <TextBlock Text="Properties" FontWeight="SemiBold" FontSize="12"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        <Run Text="PathProvider           " FontFamily="Consolas"/><Run Text="IPathProvider — supplies children and suggestions"/><LineBreak/>
                                        <Run Text="ShowLastSegmentChevron " FontFamily="Consolas"/><Run Text="bool — chevron on last segment (only if children exist)"/><LineBreak/>
                                        <Run Text="LeadingIcon            " FontFamily="Consolas"/><Run Text="IconElement — optional icon before first segment"/><LineBreak/>
                                        <Run Text="ShowBackButton         " FontFamily="Consolas"/><Run Text="bool — shows Back button"/><LineBreak/>
                                        <Run Text="ShowUpButton           " FontFamily="Consolas"/><Run Text="bool — shows Up button"/><LineBreak/>
                                        <Run Text="ShowHomeButton         " FontFamily="Consolas"/><Run Text="bool — shows Home button"/><LineBreak/>
                                        <Run Text="BackButtonTooltip      " FontFamily="Consolas"/><Run Text="string — customisable tooltip for Back"/><LineBreak/>
                                        <Run Text="UpButtonTooltip        " FontFamily="Consolas"/><Run Text="string — customisable tooltip for Up"/><LineBreak/>
                                        <Run Text="HomeButtonTooltip      " FontFamily="Consolas"/><Run Text="string — customisable tooltip for Home"/><LineBreak/>
                                        <Run Text="CanGoBack              " FontFamily="Consolas"/><Run Text="bool — set by host to enable/disable Back"/><LineBreak/>
                                        <Run Text="CurrentPath            " FontFamily="Consolas"/><Run Text="string (read-only) — full path of the current node"/><LineBreak/>
                                        <Run Text="ContextMenuItems       " FontFamily="Consolas"/><Run Text="ObservableCollection — custom right-click items"/><LineBreak/>
                                        <Run Text="CopyPathMenuText       " FontFamily="Consolas"/><Run Text="string — label for built-in Copy item"/><LineBreak/>
                                        <Run Text="PasteAndGoMenuText     " FontFamily="Consolas"/><Run Text="string — label for built-in Paste item"/>
                                    </TextBlock>
                                    <TextBlock Text="Events" FontWeight="SemiBold" FontSize="12" Margin="0,6,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        <Run Text="SegmentClicked         " FontFamily="Consolas"/><Run Text="PathNodeEventArgs — segment clicked"/><LineBreak/>
                                        <Run Text="NodeSelected           " FontFamily="Consolas"/><Run Text="PathNodeEventArgs — item chosen from chevron menu"/><LineBreak/>
                                        <Run Text="PathSubmitted          " FontFamily="Consolas"/><Run Text="PathSubmittedEventArgs — path typed in address bar"/><LineBreak/>
                                        <Run Text="BackRequested          " FontFamily="Consolas"/><Run Text="EventArgs — Back clicked"/><LineBreak/>
                                        <Run Text="UpRequested            " FontFamily="Consolas"/><Run Text="PathNodeEventArgs (parent) — Up clicked"/><LineBreak/>
                                        <Run Text="HomeRequested          " FontFamily="Consolas"/><Run Text="EventArgs — Home clicked"/><LineBreak/>
                                        <Run Text="ContextMenuItemClicked " FontFamily="Consolas"/><Run Text="BreadcrumbContextMenuItemClickedEventArgs — any menu item"/>
                                    </TextBlock>
                                    <TextBlock Text="BreadcrumbContextMenuItemClickedEventArgs" FontWeight="SemiBold" FontSize="12" Margin="0,6,0,0"/>
                                    <TextBlock TextWrapping="Wrap" FontSize="12">
                                        <Run Text="Node        " FontFamily="Consolas"/><Run Text="PathNode — the node that was right-clicked"/><LineBreak/>
                                        <Run Text="Path        " FontFamily="Consolas"/><Run Text="string — shortcut for Node.FullPath"/><LineBreak/>
                                        <Run Text="ItemTag     " FontFamily="Consolas"/><Run Text="object? — Tag from BreadcrumbContextMenuItem"/><LineBreak/>
                                        <Run Text="IsCopyPath  " FontFamily="Consolas"/><Run Text="bool — true for built-in Copy item"/><LineBreak/>
                                        <Run Text="IsPasteAndGo" FontFamily="Consolas"/><Run Text="bool — true for built-in Paste item"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </ScrollViewer>
                </TabViewItem>

            </TabView.TabItems>
        </TabView>
    </Grid>
</Window>